<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

	<!-- Beans to add to the current Application context definition -->

<beans>

	<bean parent="serviceContext">
		<property name="moduleService">
			<list>
				<value>org.openmrs.module.pharmacymanagement.service.DrugOrderService</value>
				<bean
					class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean">
					<property name="transactionManager">
						<ref bean="transactionManager" />
					</property>
					<property name="target">
						<bean
							class="org.openmrs.module.pharmacymanagement.impl.DrugOrderServiceImpl">
							<property name="drugOrderDAO">
								<bean
									class="org.openmrs.module.pharmacymanagement.db.hibernate.DrugOrderDAOImpl">
									<property name="sessionFactory">
										<ref bean="sessionFactory" />
									</property>
								</bean>
							</property>
						</bean>
					</property>
					<property name="preInterceptors">
						<list>
							<ref bean="authorizationInterceptor" />
						</list>
					</property>
					<property name="transactionAttributeSource">
						<bean
							class="org.springframework.transaction.annotation.AnnotationTransactionAttributeSource" />
					</property>
				</bean>
			</list>
		</property>
	</bean>
	
	<bean id="pharmacymanagementUrlMapping"
		class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="order">
			<value>2</value>
		</property>
		<property name="mappings">
			<props>
				<prop key="module/pharmacymanagement/storequest.form">drugStoreFormController</prop>
				<prop key="module/pharmacymanagement/arvreport.list">aRVMonthlyReport</prop>
				<prop key="module/pharmacymanagement/cmdsearch.form">cmdSearch</prop>
				<prop key="module/pharmacymanagement/order.list">displayDrugOrders</prop>
				<prop key="module/pharmacymanagement/stocksecurity.list">stockDeSecurite</prop>
				<prop key="module/pharmacymanagement/pharmacyorder.list">findPharmacyRequestForm</prop>
				<prop key="module/pharmacymanagement/pharmacyInventory.list">pharmacyDrugInventory</prop>
				<prop key="module/pharmacymanagement/report.form">pharmacyReport</prop>
				<prop key="module/pharmacymanagement/pharmacyproducts.list">pharmacyProducts</prop>
				<prop key="module/pharmacymanagement/pharmacyrequest.form">pharmacyRequestForm</prop>
				<prop key="module/pharmacymanagement/pharmacy.list">pharmacyViewController</prop>
				<prop key="module/pharmacymanagement/pharmacy.form">pharmacyFormController</prop>
				<prop key="module/pharmacymanagement/drugOrder.list">drugOrderView</prop>
				<prop key="module/pharmacymanagement/drugDetail.list">drugDetailView</prop>
				<prop key="module/pharmacymanagement/drugDetail.form">drugDetailForm</prop>
				<prop key="module/pharmacymanagement/storeAlert.htm">drugStoreAlert</prop>
				<prop key="module/pharmacymanagement/home.htm">drugStoreMgt</prop>
				<prop key="module/pharmacymanagement/patOrders.list">patientDrugOrders</prop>
				<prop key="module/pharmacymanagement/pharmacyDrugDisp.htm">pharmacyDrugDispController</prop>
				<prop key="module/pharmacymanagement/return.form">storeReturnForm</prop>				
				<prop key="module/pharmacymanagement/lot.htm">lotNumbersController</prop>					
				<prop key="module/pharmacymanagement/json.htm">jSonHandler</prop>						
				<prop key="module/pharmacymanagement/printReturnStock.list">printReturnStock</prop>
				<prop key="module/pharmacymanagement/dopc.form">drugOrderPrescriptionController</prop>
				<prop key="module/pharmacymanagement/consumabledispensation.htm">consumableDispensationController</prop>
				<prop key="module/pharmacymanagement/conceptdrug.htm">conceptDrugHandler</prop>
				<prop key="module/pharmacymanagement/cmdUpdate.form">cmdProductUpdate</prop>
				<prop key="module/pharmacymanagement/storeSearch.form">storeSearchForm</prop>
				<prop key="**/drugOrderPortlet.portlet">drugOrderPortletController</prop>
			</props>
		</property>
	</bean>

	<!-- Controllers -->
	<bean id="cmdSearch" class="org.openmrs.module.pharmacymanagement.stock.web.controller.CmdSearch">
		<property name="viewName" value="module/pharmacymanagement/findDrugCmd" />
	</bean>
	
	<bean id="aRVMonthlyReport" class="org.openmrs.module.pharmacymanagement.stock.web.controller.ARVMonthlyReport">
		<property name="viewName" value="module/pharmacymanagement/report" />
	</bean>
	
	<bean id="displayDrugOrders" class="org.openmrs.module.pharmacymanagement.stock.web.controller.DisplayDrugOrders">
		<property name="viewName" value="module/pharmacymanagement/orderDisplay" />
	</bean>	
	
	<bean id="stockDeSecurite" class="org.openmrs.module.pharmacymanagement.stock.web.controller.StockDeSecurite">
		<property name="viewName" value="module/pharmacymanagement/stockSecurite" />
	</bean>
	
	<bean id="pharmacyRequestForm" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.PharmacyRequestForm">
		<property name="viewName" value="module/pharmacymanagement/pharmacyRequestForm" />
	</bean>
	
	<bean id="findPharmacyRequestForm" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.FindPharmacyRequestForm">
		<property name="viewName" value="module/pharmacymanagement/findPharmacyRequestForm" />
	</bean>
	
	<bean id="pharmacyDrugInventory" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.PharmacyDrugInventory">
		<property name="viewName" value="module/pharmacymanagement/pharmacyDrugInventory" />
	</bean>
	
	<bean id="pharmacyProducts" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.PharmacyProducts">
		<property name="viewName" value="module/pharmacymanagement/pharmacyProducts" />
	</bean>
	
	<bean id="pharmacyReport" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.PharmacyReport">
		<property name="viewName" value="module/pharmacymanagement/pharmacyReport" />
	</bean>
	
	<bean id="pharmacyViewController" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.PharmacyViewController">
		<property name="viewName" value="module/pharmacymanagement/pharmacyView" />
	</bean>
	
	<bean id="pharmacyFormController" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.PharmacyFormController">
		<property name="viewName" value="module/pharmacymanagement/pharmacyForm" />
	</bean>
	<bean id="drugOrderView" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.DrugOrderView">
		<property name="viewName" value="module/pharmacymanagement/drugOrderList" />
	</bean>
	
	<bean id="drugDetailView" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.DrugDetailView">
		<property name="viewName" value="module/pharmacymanagement/drugDetailView" />
	</bean>
	
	<bean id="drugDetailForm" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.DrugDetailForm">
		<property name="viewName" value="module/pharmacymanagement/drugDetailForm" />
	</bean>
	
	<bean id="drugStoreAlert" class="org.openmrs.module.pharmacymanagement.stock.web.controller.DrugStoreAlert">
		<property name="viewName" value="module/pharmacymanagement/drugStoreAlert" />
	</bean>
	
	<bean id="drugStoreMgt" class="org.openmrs.module.pharmacymanagement.stock.web.controller.DrugStoreMgt">
		<property name="viewName" value="module/pharmacymanagement/menu" />
	</bean>
	
	<bean id="pharmacyDrugDispController" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.PharmacyDrugDispController">
		<property name="viewName" value="module/pharmacymanagement/pharmacyDrugDisp" />
	</bean>
	
	<bean id="patientDrugOrders" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.PatientDrugOrders">
		<property name="viewName" value="module/pharmacymanagement/patientDrugOrders" />
	</bean>
	
	<bean id="printReturnStock" class="org.openmrs.module.pharmacymanagement.stock.web.controller.PrintReturnStock">
		<property name="viewName" value="module/pharmacymanagement/printReturnStock" />
	</bean>
	
	<bean id="storeReturnForm" class="org.openmrs.module.pharmacymanagement.stock.web.controller.StoreReturnForm">
		<property name="viewName" value="module/pharmacymanagement/storeReturnForm" />
	</bean>
	
	<bean id="consumableDispensationController" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.ConsumableDispensationController">
		<property name="viewName" value="module/pharmacymanagement/consumableDispensation" />
	</bean>
	
	<bean id="cmdProductUpdate" class="org.openmrs.module.pharmacymanagement.stock.web.controller.CmdProductUpdate">
		<property name="viewName" value="module/pharmacymanagement/cmdProductUpdate" />
	</bean>
	
	<bean id="storeSearchForm" class="org.openmrs.module.pharmacymanagement.stock.web.controller.StoreSearchForm">
		<property name="viewName" value="module/pharmacymanagement/storeSearch" />
	</bean>
	
	<bean id="lotNumbersController" class="org.openmrs.module.pharmacymanagement.stock.web.controller.LotNumbersController" />
	
	<bean id="jSonHandler" class="org.openmrs.module.pharmacymanagement.stock.web.controller.JSonHandler" >
		<property name="viewName">
			<value>module/pharmacymanagement/storeReturnForm</value>
		</property>
		<property name="viewRenderer">
			<ref bean="ajaxViewRenderer" />
		</property>
	</bean>
		
	<bean id="conceptDrugHandler" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.ConceptDrugHandler">
		<property name="viewName">
			<value>json.htm</value>
		</property>
		<property name="viewRenderer">
			<ref bean="ajaxViewRenderer" />
		</property>
	</bean>
	
	<bean id="drugStoreFormController" class="org.openmrs.module.pharmacymanagement.stock.web.controller.DrugStoreFormController" />
	
	<bean id="drugOrderPrescriptionController" class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.DrugOrderPrescriptionController" />
	
	<bean id="drugOrderPortletController"
		class="org.openmrs.module.pharmacymanagement.phcymgt.web.controller.DrugOrderPortletController" />
	
    
	<!-- /Controllers -->
	
	
	<!-- view -->
	<bean id="ajaxViewRenderer" class="org.openmrs.module.pharmacymanagement.view.extn.AjaxViewRenderer" />
	<!-- /view -->
</beans>
